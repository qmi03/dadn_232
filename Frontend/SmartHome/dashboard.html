<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../assets/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Smart Home</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />

    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />

    <link href="./assets/css/light-bootstrap-dashboard.css?v=2.0.0 " rel="stylesheet" />

    <link href="./assets/css/demo.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href=".//css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">

    <script src="https://cdn.jsdelivr.net/npm/react@16.12/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@16.12/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prop-types@15.7.2/prop-types.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-apexcharts@1.3.6/dist/react-apexcharts.iife.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="./vendors/themify-icons/css/themify-icons.css">
    <link rel="stylesheet" href="../assets/css/style.css">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
    <style>
        /* Đoạn CSS của bạn ở đây */
        .light-block {
            text-align: center;
            margin-bottom: 20px;
        }

        .light-image {
            max-width: 100%;
        }

        .light-button {
            margin-top: 10px;
        }

        .card-group {
            border: 1px solid #ccc;
            /* Màu và độ dày của viền */
            border-radius: 5px;
            /* Độ cong của góc */
            padding: 15px;
            /* Khoảng cách nội dung từ khung viền */
            background-color: #5EE893
        }
    </style>


    <script>
        var _seed = 42;
        Math.random = function () {
            _seed = _seed * 16807 % 2147483647;
            return (_seed - 1) / 2147483646;
        };
    </script>

    <script>
        var lastDate = 0;
        var data = []
        var TICKINTERVAL = 1000
        let XAXISRANGE = 9000
        function getDayWiseTimeSeries(baseval, count, yrange) {
            var i = 0;
            while (i < count) {
                var x = baseval;
                var y = Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min;

                data.push({
                    x, y
                });
                lastDate = baseval
                baseval += TICKINTERVAL;
                i++;
            }
        }

        getDayWiseTimeSeries(new Date('11 Feb 2017 GMT').getTime(), 10, {
            min: 20,
            max: 40
        })

        function getNewSeries(baseval, yrange) {
            var newDate = baseval + TICKINTERVAL;
            lastDate = newDate

            for (var i = 0; i < data.length - 10; i++) {
                // IMPORTANT
                // we reset the x and y of the data which is out of drawing area
                // to prevent memory leaks
                data[i].x = newDate - XAXISRANGE - TICKINTERVAL
                data[i].y = 0
            }

            data.push({
                x: newDate,
                y: Math.floor(Math.random() * (yrange.max - yrange.min + 1)) + yrange.min
            })
        }

        function resetData() {
            // Alternatively, you can also reset the data at certain intervals to prevent creating a huge series 
            data = data.slice(data.length - 10, data.length);
        }
    </script>

</head>

<body>
    <div class="wrapper">
        <div class="sidebar" data-image="./assets/img/sidebar-5.jpg">

            <div class="sidebar-wrapper">
                <div class="logo">

                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                        <h3>Smart Home</h3>

                    </div>
                </div>
                <ul class="nav">
                    <li class="nav-item active"><a class="nav-link" href="dashboard.html">
                            <i class="nc-icon nc-chart-pie-35"></i>
                            <p>Dashboard</p>
                        </a>
                    </li>
                    <li><a class="nav-link" href="./camera.html">
                            <i class="nc-icon nc-camera-20"></i>
                            <p>Camera </p>

                        </a>
                    </li>

                    <li><a class="nav-link" href="./scheduler.html">
                            <i class="nc-icon nc-layers-3"></i>
                            <p>Schedule</p>
                        </a>
                    </li>
                    <li><a class="nav-link" href="./report.html">
                            <i class="nc-icon nc-paper-2"></i>
                            <p>Report </p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="main-panel">

            <nav class="navbar navbar-expand-lg " color-on-scroll="500">
                <div class="container-fluid"><a class="navbar-brand" href="#pablo"> Dashboard </a>
                    <button href="" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                        aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation"><span
                            class="navbar-toggler-bar burger-lines"></span><span
                            class="navbar-toggler-bar burger-lines"></span><span
                            class="navbar-toggler-bar burger-lines"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navigation">

                        <ul class="navbar-nav ml-auto">

                            <li class="nav-item"><a class="nav-link" href="#pablo"><span class="no-icon">Log out</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <div class="content">
                <div class="container-fluid">

                    <div class="row justify-content-center">

                        <div class="col-xl-6">
                            <div id="app"></div>
                        </div>

                        <div class="col-xl-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <svg class="svg-inline--fa fa-chart-bar me-1" aria-hidden="true" focusable="false"
                                        data-prefix="fas" data-icon="chart-bar" role="img"
                                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
                                        <path fill="currentColor"
                                            d="M32 32c17.7 0 32 14.3 32 32V400c0 8.8 7.2 16 16 16H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H80c-44.2 0-80-35.8-80-80V64C0 46.3 14.3 32 32 32zm96 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 64H288c17.7 0 32 14.3 32 32s-14.3 32-32 32H160c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 96H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H160c-17.7 0-32-14.3-32-32s14.3-32 32-32z">
                                        </path>
                                    </svg>
                                    Độ ẩm phòng
                                </div>
                                <div class="card-body">
                                    <canvas id="myAreaChart2" width="474" height="189"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-center">

                        <div class="col-xl-6">
                            <div id="chart_temp"></div>
                        </div>


                        <div class="col-xl-6">
                            <div id="chart_humid"></div>
                        </div>
                    </div>

                    <div class="row justify-content-center">
                        <div class="col-sm-6 col-12" style="justify-self: center;">
                            <div class="card-group">
                                <div>
                                    <h4>Trạng thái chiếu sáng của đèn </h4>
                                </div>
                                <div class="row justify-content-center">

                                    <div class="col-sm-3 text-center"><img src="light_on.png" alt="Light Off"
                                            id="lightImage1" class="card-img-top light-image">
                                        <div class="card-body">
                                            <h5 class="card-title text-center" style="padding: 5px;"> Light 1</h5>
                                            <label class="switch switch-text switch-primary switch-pill">
                                                <input type="checkbox" class="switch-input" checked="true"
                                                    onchange="toggleLight('lightImage1', this)"><span data-on="On"
                                                    data-off="Off" class="switch-label"></span><span
                                                    class="switch-handle"></span>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="col-sm-3 text-center"><img src="light_on.png" alt="Light Off"
                                            id="lightImage2" class="card-img-top light-image">
                                        <div class="card-body">
                                            <h5 class="card-title text-center" style="padding: 5px;"> Light 1</h5>
                                            <label class="switch switch-text switch-primary switch-pill">
                                                <input type="checkbox" class="switch-input" checked="true"
                                                    onchange="toggleLight('lightImage2', this)"><span data-on="On"
                                                    data-off="Off" class="switch-label"></span><span
                                                    class="switch-handle"></span>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="col-sm-3 text-center"><img src="light_on.png" alt="Light Off"
                                            id="lightImage3" class="card-img-top light-image">
                                        <div class="card-body">
                                            <h5 class="card-title text-center" style="padding: 5px;"> Light 1</h5>
                                            <label class="switch switch-text switch-primary switch-pill">
                                                <input type="checkbox" class="switch-input" checked="true"
                                                    onchange="toggleLight('lightImage3', this)"><span data-on="On"
                                                    data-off="Off" class="switch-label"></span><span
                                                    class="switch-handle"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <nav>

                    </nav>
                </div>
            </footer>
        </div>
    </div>


</body>

<script src="./assets/js/core/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
<script src="./assets/js/core/bootstrap.min.js" type="text/javascript"></script>

<script src="./assets/js/plugins/bootstrap-switch.js"></script>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>

<script src="./assets/js/plugins/chartist.min.js"></script>



<script src="./assets/js/light-bootstrap-dashboard.js?v=2.0.0 " type="text/javascript"></script>

<script src="./assets/js/demo.js"></script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>
<script src="./js/scripts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
<script src="./assets/demo/chart-area-demo.js"></script>
<script src="./assets/demo/chart-bar-demo.js"></script>
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js"
    crossorigin="anonymous"></script>
<script src="./js/datatables-simple-demo.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="/assets/js/init-scripts/chart-js/chartjs-init.js"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"
    integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>

<script async="" defer="" src="https://buttons.github.io/buttons.js"></script>


<script>
    // Xử lý sự kiện khi switch thay đổi trạng thái
    function toggleLight(imageId, switchElement) {
        var lightImage = document.getElementById(imageId);
        if (switchElement.checked) {
            lightImage.src = 'light_on.png'; // Thay đổi hình ảnh sang light_on.png khi switch On
        } else {
            lightImage.src = 'light_off.png'; // Thay đổi hình ảnh sang light_off.png khi switch Off
        }
    }

</script>


<script>
    // Data for the initial chart
    let initialData = {
        labels: [],
        datasets: [{
            label: 'Độ C',
            borderColor: 'red',
            backgroundColor: 'rgba(255, 0, 0, 1)',
            data: []
        }]
    };

    // Configuration for the chart
    let chartConfig = {
        type: 'line',
        data: initialData,
        options: {
            scales: {
                xAxes: [{
                    type: 'realtime',
                    realtime: {
                        duration: 20000,
                        refresh: 10000,
                        delay: 500,
                        pause: false,
                        ttl: undefined
                    }
                }],
                yAxes: {
                    scaleLabel: {
                        display: true,
                        labelString: 'Value',
                        min: 0,
                        max: 100
                    },
                    ticks: {
                        beginAtZero: true,
                        suggestedMin: 0,
                        suggestedMax: 100, // Giá trị tối đa cho trục y
                        stepSize: 10 // Bước giữa các giá trị
                    }
                }
            },
            plugins: {
                streaming: {
                    frameRate: 30
                }
            }
        }
    };
    let ctx = document.getElementById('myAreaChart').getContext('2d');
    let myAreaChart = new Chart(ctx, chartConfig);

    function addData(time, value) {
        myAreaChart.data.labels.push(time);
        myAreaChart.data.datasets.forEach(dataset => {
            dataset.data.push(value);
        });
        myAreaChart.update();
        // Chỉ giữ lại 10 giá trị gần nhất
        if (myAreaChart.data.labels.length > 20) {
            myAreaChart.data.labels.shift(); // Xóa giá trị đầu tiên của mảng labels
            myAreaChart.data.datasets.forEach(dataset => {
                dataset.data.shift(); // Xóa giá trị đầu tiên của mảng data
            });
        }
        myAreaChart.update();

    }
    setInterval(() => {
        let time = new Date().toISOString().substr(11, 8); // Current time
        let value = Math.floor(Math.random() * (32 - 25 + 1)) / 10 + 25; // Random value
        addData(time, value);
    }, 1000);
</script>


<script type="text/babel">
    class ApexChart extends React.Component {
        constructor(props) {
            super(props);

            this.state = {

                series: [{
                    data: data.slice()
                }],
                options: {
                    chart: {
                        id: 'realtime',
                        height: 350,
                        type: 'line',
                        animations: {
                            enabled: true,
                            easing: 'linear',
                            dynamicAnimation: {
                                speed: 1000
                            }
                        },
                        toolbar: {
                            show: false
                        },
                        zoom: {
                            enabled: false
                        }
                    },
                    dataLabels: {
                        enabled: false
                    },
                    stroke: {
                        curve: 'smooth'
                    },
                    title: {
                        text: 'Nhiệt độ phòng',
                        align: 'left'
                    },
                    markers: {
                        size: 0
                    },
                    xaxis: {
                        type: 'datetime',
                        range: XAXISRANGE,
                    },
                    yaxis: {
                        min: 10,
                        max: 50
                    },
                    legend: {
                        show: false
                    },
                },


            };
        }


        componentDidMount() {
            window.setInterval(() => {
                getNewSeries(lastDate, {
                    min: 20,
                    max: 40
                })

                ApexCharts.exec('realtime', 'updateSeries', [{
                    data: data
                }])
            }, 1000)
        }


        render() {
            return (
                <div>
                    <div id="chart">
                        <ReactApexChart options={this.state.options} series={this.state.series} type="line" height={350} />
                    </div>
                    <div id="html-dist"></div>
                </div>
            );
        }
    }

    const domContainer = document.querySelector('#app');
    ReactDOM.render(React.createElement(ApexChart), domContainer);
</script>



<script>
    // Data for the initial chart
    let initialData2 = {
        labels: [],
        datasets: [{
            label: '%',
            borderColor: 'blue',
            backgroundColor: 'rgba(0, 0, 255, 1)',
            data: []
        }]
    };

    // Configuration for the chart
    let chartConfig2 = {
        type: 'line',
        data: initialData2,
        options: {
            scales: {
                xAxes: [{
                    type: 'realtime',
                    realtime: {
                        duration: 20000,
                        refresh: 10000,
                        delay: 500,
                        pause: false,
                        ttl: undefined
                    }
                }],
                yAxes: {
                    scaleLabel: {
                        display: true,
                        labelString: 'Value',
                        min: 0,
                        max: 100
                    },
                    ticks: {
                        beginAtZero: true,
                        min: 0, // Giá trị tối thiểu cho trục y
                        max: 100, // Giá trị tối đa cho trục y
                        stepSize: 10 // Bước giữa các giá trị
                    }
                }
            },
            plugins: {
                streaming: {
                    frameRate: 30
                }
            }
        }
    };
    let ctx2 = document.getElementById('myAreaChart2').getContext('2d');
    let myAreaChart2 = new Chart(ctx2, chartConfig2);

    function addData2(time, value) {
        myAreaChart2.data.labels.push(time);
        myAreaChart2.data.datasets.forEach(dataset => {
            dataset.data.push(value);
        });
        myAreaChart2.update();
        // Chỉ giữ lại 10 giá trị gần nhất
        if (myAreaChart2.data.labels.length > 10) {
            myAreaChart2.data.labels.shift(); // Xóa giá trị đầu tiên của mảng labels
            myAreaChart2.data.datasets.forEach(dataset => {
                dataset.data.shift(); // Xóa giá trị đầu tiên của mảng data
            });
        }
        myAreaChart2.update();

    }
    setInterval(() => {
        let time = new Date().toISOString().substr(11, 8); // Current time
        let value = Math.floor(Math.random() * (32 - 25 + 1)) + 25; // Random value
        addData2(time, value);
    }, 1000);
</script>

<script>
    $(document).ready(function () {

        $('.add').click(function () {
            $(".list").append(
                '<div class="mb-2 row justify-content-between px-3">' +
                '<select class="mob mb-2">' +
                '<option value="opt1">Mon</option>' +
                '<option value="opt2">Tue</option>' +
                '<option value="opt3">Web</option>' +
                '<option value="opt4">Thu</option>' +
                '<option value="opt5">Sat</option>' +
                '<option value="opt6">Fri</option>' +
                '<option value="opt7">Sun</option>' +
                '</select>' +
                '<div class="mob">' +
                '<label class="text-grey mr-1">From</label>' +
                '<input class="ml-1" type="time" name="from">' +
                '</div>' +
                '<div class="mb-2 row justify-content-between px-3"> <select class="mb-2 mob">' +
                '<option value="opt1"">ON</option>' +
                '<option value="opt2">OFF</option>' +
                '</select>' +
                '<div class="mt-1 cancel fa fa-times text-danger">' +
                '</div>' +
                '</div>');
        });

        $(".list").on('click', '.cancel', function () {
            $(this).parent().remove();
        });

    });
</script>


<script type="text/babel">
    class ApexChart extends React.Component {
        constructor(props) {
            super(props);

            this.state = {

                series: [{
                    name: 'Nhiệt độ môi trường',
                    data: [31, 32, 30, 33, 37, 32, 33]
                }, {
                    name: 'Nhiệt độ phòng',
                    data: [24, 25, 24, 25, 26, 25, 26]
                }],
                options: {
                    chart: {
                        height: 350,
                        type: 'area'
                    },
                    dataLabels: {
                        enabled: false
                    },
                    title: {
                        text: 'Nhiệt độ trung bình so với môi trường',
                        align: 'left'
                    },
                    stroke: {
                        curve: 'smooth'
                    },
                    xaxis: {
                        type: 'datetime',
                        categories: ["2018-09-19T00:00:00.000Z", "2018-09-20T01:30:00.000Z", "2018-09-21T02:30:00.000Z", "2018-09-22T03:30:00.000Z", "2018-09-23T04:30:00.000Z", "2018-09-24T05:30:00.000Z", "2018-09-25T06:30:00.000Z"]
                    },
                    tooltip: {
                        x: {
                            format: 'dd/MM/yy'
                        },
                    },
                },


            };
        }



        render() {
            return (
                <div>
                    <div id="chart">
                        <ReactApexChart options={this.state.options} series={this.state.series} type="area" height={350} />
                    </div>
                    <div id="html-dist"></div>
                </div>
            );
        }
    }

    const domContainer2 = document.querySelector('#chart_temp');
    ReactDOM.render(React.createElement(ApexChart), domContainer2);
</script>


<script type="text/babel">
    class ApexChart extends React.Component {
        constructor(props) {
            super(props);

            this.state = {

                series: [{
                    name: 'Độ ẩm môi trường',
                    data: [60, 65, 67, 72, 64, 75, 77]
                }, {
                    name: 'Độ ẩm phòng',
                    data: [60, 61, 60, 61, 59, 60, 61]
                }],
                options: {
                    chart: {
                        height: 350,
                        type: 'area'
                    },
                    dataLabels: {
                        enabled: false
                    },
                    title: {
                        text: 'Độ ẩm trung bình so với môi trường',
                        align: 'left'
                    },
                    stroke: {
                        curve: 'smooth'
                    },
                    xaxis: {
                        type: 'datetime',
                        categories: ["2018-09-19T00:00:00.000Z", "2018-09-20T01:30:00.000Z", "2018-09-21T02:30:00.000Z", "2018-09-22T03:30:00.000Z", "2018-09-23T04:30:00.000Z", "2018-09-24T05:30:00.000Z", "2018-09-25T06:30:00.000Z"]
                    },
                    tooltip: {
                        x: {
                            format: 'dd/MM/yy'
                        },
                    },
                },


            };
        }
        render() {
            return (
                <div>
                    <div id="chart_humid">
                        <ReactApexChart options={this.state.options} series={this.state.series} type="area" height={350} />
                    </div>
                    <div id="html-dist"></div>
                </div>
            );
        }
    }

    const domContainer3 = document.querySelector('#chart_humid');
    ReactDOM.render(React.createElement(ApexChart), domContainer3);
</script>

</html>